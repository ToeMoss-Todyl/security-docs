---
id: serverlessSecurityHostIsolationExceptionsApi
# slug: /serverless/security/host-isolation-exceptions-api
title: Host isolation exceptions
# description: Description to be written
tags: [ 'serverless', 'security', 'reference' ]
status: rough content
---

import EndpointExceptionsRequestPayloadListIdAndNamespaceRequirements from './transclusion/management/api/_exceptions-api-reusable-content/endpoint-exceptions-request-payload-list-id-and-namespace-requirements.mdx'
import CreateHostIsolationExceptionContainerRequestBody from './transclusion/management/api/_exceptions-api-reusable-content/create-host-isolation-exception-container-request-body.mdx'
import EndpointExceptionsRequestPayloadRequirements from './transclusion/management/api/_exceptions-api-reusable-content/endpoint-exceptions-request-payload-requirements.mdx'
import CreateExceptionItemRequestBody from './transclusion/management/api/_exceptions-api-reusable-content/create-exception-item-request-body.mdx'
import UpdateExceptionItemRequestBody from './transclusion/management/api/_exceptions-api-reusable-content/update-exception-item-request-body.mdx'
import ApiIdOrItemidQueryParams from './transclusion/management/api/_exceptions-api-reusable-content/api-id-or-itemid-query-params.mdx'
import FindExceptionItemsQueryParams from './transclusion/management/api/_exceptions-api-reusable-content/find-exception-items-query-params.mdx'
import EndpointExceptionsValueTypesInfoSection from './transclusion/management/api/_exceptions-api-reusable-content/endpoint-exceptions-value-types-info-section.mdx'

<div id="host-isolation-exceptions-api"></div>

export let endpoint_artifact_list_id = "endpoint_host_isolation_exceptions"

export let endpoint_artifact_name = "host isolation exceptions"

export let endpoint_artifact_name_single = "host isolation exception"

export let endpoint_artifact_name_sentence_start = "Host isolation exceptions"

export let endpoint_artifact_name_single_sentence_start = "Host isolation exception"

export let endpoint_artifact_api_doc_name = "host-isolation-exception"

Create, retrieve, update, and delete endpoint <DocLink id="serverlessSecurityHostIsolationExceptions">host isolation exceptions</DocLink> via API. {endpoint_artifact_name_sentence_start} are managed via the <DocLink id="serverlessSecurityExceptionsApiOverview">Exceptions API</DocLink> using a static container id (`list_id`) of `pass:a[{endpoint_artifact_list_id}]`, which must be created prior to adding the {endpoint_artifact_name}. Access to these APIs requires that a user has authorization to manage endpoints.

## Create {endpoint_artifact_name} container

`POST <kibana host>:<port>/api/exception_lists`

### Request body

A JSON object containing the fields listed below. The request must have the following:

<EndpointExceptionsRequestPayloadListIdAndNamespaceRequirements
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

- The `type` value must be `endpoint_host_isolation_exceptions`.

<CreateHostIsolationExceptionContainerRequestBody />

### Example request

```console
POST api/exception_lists
{
  "description": "((elastic-defend)) Host Isolation Exceptions List",
  "name": "((elastic-defend)) Host Isolation Exceptions List",
  "list_id": "{endpoint_artifact_list_id}",
  "type": "endpoint_host_isolation_exceptions",
  "namespace_type": "agnostic"
}
```
{/* KIBANA */}

### Response code

`200` 
    : Indicates a successful call.

### Response payload

```json
{
	"_version": "WzIxMTgsMV0=",
	"created_at": "2022-03-03T13:55:32.176Z",
	"created_by": "elastic",
	"description": "((elastic-defend)) Host Isolation Exceptions List",
	"id": "978cbd00-9af9-11ec-94b1-fd7e90cc2a08",
	"immutable": false,
	"list_id": "{endpoint_artifact_list_id}",
	"name": "((elastic-defend)) Host Isolation Exceptions List",
	"namespace_type": "agnostic",
	"os_types": [],
	"tags": [],
	"tie_breaker_id": "9894ae5c-2ce0-47dc-8c52-784ca2219fc3",
	"type": "endpoint_host_isolation_exceptions",
	"updated_at": "2022-03-03T13:55:32.178Z",
	"updated_by": "elastic",
	"version": 1
}
```

<div id="create-{endpoint_artifact_api_doc_name}-item-api"></div>

## Create {endpoint_artifact_name_single}

`POST <kibana host>:<port>/api/exception_lists/items`

### Request body

A JSON object containing the fields listed below. The request must have the following:

<EndpointExceptionsRequestPayloadRequirements
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

- `os_types` must be an array with all xref:exception-{endpoint_artifact_api_doc_name}-item-os-types[]

<CreateExceptionItemRequestBody
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

#### Example request

```console
POST api/exception_lists/items
{
  "description": "some description about this entry",
  "entries": [
      {
          "field": "destination.ip",
          "value": "10.10.0.1",
          "type": "match",
          "operator": "included"
      }
  ],
  "list_id": "{endpoint_artifact_list_id}",
  "name": "Some name for this item",
  "namespace_type": "agnostic",
  "os_types": [
    "linux",
    "macos",
    "windows"
  ],
  "tags": [
      "policy:all"
  ],
  "type": "simple"
}
```
{/* KIBANA */}

### Response code

`200` 
    : Indicates a successful call.

### Response payload

```json
{
	"_version": "WzIxNDcsMV0=",
	"created_at": "2022-03-03T14:04:00.496Z",
	"created_by": "elastic",
	"description": "some description about this entry",
	"entries": [
		{
			"field": "destination.ip",
			"value": "10.10.0.1",
			"type": "match",
			"operator": "included"
		}
	],
	"id": "c6883700-9afa-11ec-94b1-fd7e90cc2a08",
	"item_id": "1342081d-66ad-4b03-b554-131195ce404b",
	"list_id": "endpoint_host_isolation_exceptions",
	"name": "Host Isolation Exception - Created with API",
	"namespace_type": "agnostic",
	"os_types": [
		"linux",
		"macos",
		"windows"
	],
	"tags": [
		"policy:all"
	],
	"tie_breaker_id": "b65843e1-07b8-46d2-9e2b-5f0586dc364a",
	"type": "simple",
	"updated_at": "2022-03-03T14:04:00.498Z",
	"updated_by": "elastic"
}
```

<div id="update-{endpoint_artifact_api_doc_name}-item-api"></div>

## Update {endpoint_artifact_name_single}

`PUT <kibana host>:<port>/api/exception_lists/items`

### Request body

A JSON object containing the fields listed below. The request must have the following:

<EndpointExceptionsRequestPayloadRequirements
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

- `os_types` must be an array with all xref:exception-{endpoint_artifact_api_doc_name}-item-os-types[]

<UpdateExceptionItemRequestBody
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

#### Example request

Updates the `entries`:

```console
PUT api/exception_lists/items
{
	"description": "via API",
	"entries": [
		{
			"field": "destination.ip",
			"type": "match",
			"value": "10.10.0.15",
			"operator": "included"
		}
	],
	"id": "c6883700-9afa-11ec-94b1-fd7e90cc2a08",
	"item_id": "1342081d-66ad-4b03-b554-131195ce404b",
	"name": "Host Isolation Exception - Created with API",
	"namespace_type": "agnostic",
	"os_types": [
		"linux",
		"macos",
		"windows"
	],
	"type": "simple"
}
```
{/* KIBANA */}

### Response code

`200` 
    : Indicates a successful call.

### Response payload

```json
{
	"_version": "WzIyMDIsMV0=",
	"created_at": "2022-03-03T14:04:00.496Z",
	"created_by": "elastic",
	"description": "via API",
	"entries": [
		{
			"field": "destination.ip",
			"type": "match",
			"value": "10.10.0.15",
			"operator": "included"
		}
	],
	"id": "c6883700-9afa-11ec-94b1-fd7e90cc2a08",
	"item_id": "1342081d-66ad-4b03-b554-131195ce404b",
	"list_id": "endpoint_host_isolation_exceptions",
	"name": "HIE via API",
	"namespace_type": "agnostic",
	"os_types": [
		"linux",
		"macos",
		"windows"
	],
	"tags": [],
	"tie_breaker_id": "b65843e1-07b8-46d2-9e2b-5f0586dc364a",
	"type": "simple",
	"updated_at": "2022-03-03T14:22:08.345Z",
	"updated_by": "elastic"
}
```

## Delete {endpoint_artifact_name_single}

`DELETE <kibana host>:<port>/api/exception_lists/items`

### URL query parameters

<ApiIdOrItemidQueryParams
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

#### Example request

Deletes the {endpoint_artifact_name_single} with `item_id` of `1342081d-66ad-4b03-b554-131195ce404b`:

```console
DELETE api/exception_lists/items?item_id=1342081d-66ad-4b03-b554-131195ce404b&namespace_type=agnostic
```
{/* KIBANA */}

### Response code

`200` 
    : Indicates a successful call.

### Response payload

The item that was deleted:

```json
{
	"_version": "WzIyNDksMV0=",
	"comments": [],
	"created_at": "2022-03-04T12:42:41.797Z",
	"created_by": "elastic",
	"description": "some description about this entry",
	"entries": [
		{
			"field": "destination.ip",
			"value": "10.10.0.1",
			"type": "match",
			"operator": "included"
		}
	],
	"id": "c6883700-9afa-11ec-94b1-fd7e90cc2a08",
	"item_id": "1342081d-66ad-4b03-b554-131195ce404b",
	"list_id": "endpoint_host_isolation_exceptions",
	"name": "Host Isolation Exception via API",
	"namespace_type": "agnostic",
	"os_types": [
		"linux",
		"macos",
		"windows"
	],
	"tags": [
		"policy:all"
	],
	"tie_breaker_id": "c0401075-7bd5-47e2-bd6c-4f7e088aa348",
	"type": "simple",
	"updated_at": "2022-03-04T12:42:41.802Z",
	"updated_by": "elastic"
}
```

## Retrieve single {endpoint_artifact_name_single}

`GET <kibana host>:<port>/api/exception_lists/items`

### URL query parameters

<ApiIdOrItemidQueryParams
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

#### Example request

```console
GET api/exception_lists/items?item_id=1342081d-66ad-4b03-b554-131195ce404b&namespace_type=agnostic
```
{/* KIBANA */}

### Response code

`200` 
    : Indicates a successful call.

### Response payload

```json
{
  "_version": "WzEzNjcsMV0=",
  "created_at": "2022-03-01T16:24:39.471Z",
  "created_by": "elastic",
  "description": "Host Isolation Exception item via API",
  "entries": [
    {
      "field": "destination.ip",
      "type": "match",
      "value": "10.10.0.15",
      "operator": "included"
    }
  ],
  "id": "c6883700-9afa-11ec-94b1-fd7e90cc2a08",
	"item_id": "1342081d-66ad-4b03-b554-131195ce404b",
  "list_id": "{endpoint_artifact_list_id}",
  "name": "Host Isolation Exception via API",
  "namespace_type": "agnostic",
  "os_types": [
		"linux",
		"macos",
		"windows"
	],
  "tags": [
    "policy:all"
  ],
  "tie_breaker_id": "97fe9d23-c8b8-4dc1-97e1-16444c8d863a",
  "type": "simple",
  "updated_at": "2022-03-01T17:21:07.273Z",
  "updated_by": "elastic"
}
```

## Find {endpoint_artifact_name}

`GET <kibana host>:<port>/api/exception_lists/items/_find`

### URL query parameters

<FindExceptionItemsQueryParams
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

#### Example request

```console
GET api/exception_lists/items/_find?page=1&per_page=10&sort_field=name&sort_order=asc&list_id={endpoint_artifact_list_id}&namespace_type=agnostic
```
{/* KIBANA */}

### Response code

`200` 
    : Indicates a successful call.

### Response payload

```json
{
  "data": [
    {
      "_version": "WzEzNjcsMV0=",
      "created_at": "2022-03-01T16:24:39.471Z",
      "created_by": "elastic",
      "description": "Host Isolation Exception item via API",
      "entries": [
        {
          "field": "destination.ip",
          "type": "match",
          "value": "10.10.0.15",
          "operator": "included"
        }
      ],
      "id": "4e0e4e10-9af8-11ec-94b1-fd7e90cc2a08",
      "item_id": "6555a6ed-b31c-4c74-b1a1-f2c5d9fb7d4a",
      "list_id": "{endpoint_artifact_list_id}",
      "name": "Host Isolation Exception via API",
      "namespace_type": "agnostic",
      "os_types": [
        "linux",
        "macos",
        "windows"
      ],
      "tags": [
        "policy:all"
      ],
      "tie_breaker_id": "97fe9d23-c8b8-4dc1-97e1-16444c8d863a",
      "type": "simple",
      "updated_at": "2022-03-01T17:21:07.273Z",
      "updated_by": "elastic"
    }
  ],
  "page": 1,
  "per_page": 10,
  "total": 1
}
```

<EndpointExceptionsValueTypesInfoSection
  endpoint_artifact_list_id={endpoint_artifact_list_id}
  endpoint_artifact_name={endpoint_artifact_name}
  endpoint_artifact_name_single={endpoint_artifact_name_single}
  endpoint_artifact_name_sentence_start={endpoint_artifact_name_sentence_start}
  endpoint_artifact_name_single_sentence_start={endpoint_artifact_name_single_sentence_start}
  endpoint_artifact_api_doc_name={endpoint_artifact_api_doc_name}
/>

<div id="exception-{endpoint_artifact_api_doc_name}-item-entry-schema"></div>

### `entry` object schema

{endpoint_artifact_name_sentence_start} allow for at most 1 condition to be defined. The following entry is supported by {endpoint_artifact_name}:

#### Destination IPs

Destination IPs are supported by all xref:exception-{endpoint_artifact_api_doc_name}-item-os-types[OS types]. A destination IP entry has the following structure:

```json
{
  "field": "destination.ip",
  "value": "192.168.1.1",
  "type": "match",
  "operator": "included"
}
```

* `field` : `destination.ip`.
* `value` : A valid IPv4 address with optional CIDR associated with the `field`.
* `type` : Must be `match`.
* `operator` : Must be `included`.

