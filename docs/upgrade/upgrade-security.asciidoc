[[upgrade-intro]]


= Upgrade {elastic-sec}

We highly recommend that all {elastic-sec} users keep their deployments up to date with the latest available {stack} version to have access to new features, security updates, and performance enhancements.

For upgrading to the latest {stack} version, we recommend using the {kibana-ref}/upgrade-assistant.html[Kibana Upgrade Assistant].

NOTE: Refer to {stack-ref}/upgrading-elastic-stack.html[Upgrading the {stack}] for complete instructions on how to upgrade the full {stack}.

[discrete]
[[pre-upgrade-security]]
== Pre-upgrade requirements for 8.0

Before you upgrade, review the following requirements that are specific to {elastic-sec}.

*Upgrade agents*

Upgrade your {stack} and {agent}s to 7.17 first (refer to {fleet-guide}/upgrade-elastic-agent.html[Upgrade Fleet-managed Elastic Agents]). After this complete, you can then {stack-ref}/upgrading-elastic-stack.html[upgrade the {stack}] to 8.0. Initially, {agent}s will be version 7.17. This is fine because {elastic-sec} supports the last minor in 7.x (7.17) and any subsequent {elastic-endpoint} versions in 8.x. After the {stack} upgrade, you can decide whether to upgrade {agent}s to 8.0.0, which is recommended to ensure you get the latest features and improvements.

NOTE: You do not need to shut down your {agents}or endpoints to upgrade the {stack}.

*Disable all rules*

Manually disable your rules before upgrading, then reactivate them after the process completes. If this is not done, rules are automatically disabled during the upgrade process. This can cause cause a gap in rule coverage.

To disable all rules:

. Go to *Detect* -> *Rules*.
. Click the *Select All Rules* button above the All rules table.
. Click *Bulk actions* -> *Deactivate selected*.

To reactivate all detection rules:

. Go to *Detect* -> *Rules*.
. Click the *Select All Rules* button above the All rules table.
. Click *Bulk actions* -> *Activate selected*.

NOTE: To use the {elastic-sec} API to re-enable rules, refer to <<bulk-actions-rules-api>>.

*New Full Disk Access approval needed for {elastic-endpoint}*

When you manually install {elastic-endpoint}, you must approve a system extension, kernel extension, and enable Full Disk Access. Refer to <<deploy-elastic-endpoint>> to review the required permissions for {stack} version 8.0.0 and later. 
